<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´€ê³„ ë¶„ì„ ê²°ê³¼ - Date Genie | AI ê¸°ë°˜ ì‹¬ë¦¬ ë¶„ì„ ì„œë¹„ìŠ¤</title>
    <meta name="description" content="AI ê¸°ë°˜ ëŒ€í™” ë¶„ì„ì„ í†µí•œ ì •í™•í•œ ê´€ê³„ ìƒíƒœ íŒŒì•…ê³¼ ë§ì¶¤í™”ëœ ë°œì „ ì „ëµ ì œê³µ">
    <meta name="keywords" content="ëŒ€í™”ë¶„ì„, ì‹¬ë¦¬ë¶„ì„, ê´€ê³„ë¶„ì„, AIë¶„ì„, ì—°ì• ì¡°ì–¸">
    <meta name="author" content="Date Genie Team">
    <meta property="og:title" content="ê´€ê³„ ë¶„ì„ ê²°ê³¼ - Date Genie">
    <meta property="og:description" content="AI ê¸°ë°˜ ëŒ€í™” ë¶„ì„ ê²°ê³¼ì™€ ë§ì¶¤í™”ëœ ê´€ê³„ ë°œì „ ì „ëµ">
    <meta property="og:type" content="website">
    <link rel="icon" type="image/svg+xml" href="images/icon.svg">
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* === Enhanced CSS Variables & System === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        :root {
            /* Color System */
            --color-primary-50: #faf5ff;
            --color-primary-100: #f3e8ff;
            --color-primary-500: #8b5cf6;
            --color-primary-600: #7c3aed;
            --color-primary-700: #6d28d9;
            
            --color-accent-50: #fdf2f8;
            --color-accent-500: #ec4899;
            --color-accent-600: #db2777;
            
            --color-success: #10b981;
            --color-warning: #f59e0b;
            --color-danger: #ef4444;
            --color-info: #3b82f6;
            
            --color-gray-50: #f9fafb;
            --color-gray-100: #f3f4f6;
            --color-gray-200: #e5e7eb;
            --color-gray-500: #6b7280;
            --color-gray-900: #1f1d3a;
            
            /* Spacing System */
            --space-xs: 0.25rem;
            --space-sm: 0.5rem;
            --space-md: 1rem;
            --space-lg: 1.5rem;
            --space-xl: 2rem;
            --space-2xl: 3rem;
            
            /* Typography */
            --font-size-sm: 0.875rem;
            --font-size-base: 1rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-2xl: 1.5rem;
            --font-size-3xl: 2rem;
            
            /* Component Variables */
            --navbar-height: 70px;
            --primary-gradient: linear-gradient(135deg, var(--color-accent-500), var(--color-primary-500));
            --success-color: var(--color-success);
            --warning-color: var(--color-warning);
            --danger-color: var(--color-danger);
            --info-color: var(--color-info);
            --text-primary: var(--color-gray-900);
            --text-secondary: var(--color-gray-500);
            --bg-card: rgba(255, 255, 255, 0.95);
            --shadow-primary: 0 10px 30px rgba(0, 0, 0, 0.08);
            --shadow-hover: 0 15px 40px rgba(0, 0, 0, 0.12);
            
            /* Accessibility */
            --focus-outline: 3px solid var(--color-primary-500);
            --focus-outline-offset: 2px;
            
            /* Animation */
            --transition-fast: 0.15s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-base: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: linear-gradient(135deg, var(--color-primary-50) 0%, var(--color-accent-50) 40%, #eef2ff 100%);
            min-height: 100vh;
            scroll-behavior: smooth;
        }
        
        body:focus {
            outline: none;
        }
        
        /* High contrast mode support */
        @media (prefers-contrast: high) {
            :root {
                --bg-card: rgba(255, 255, 255, 1);
                --shadow-primary: 0 2px 8px rgba(0, 0, 0, 0.25);
            }
        }

        /* === Navigation === */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--navbar-height);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .brand-logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 700;
            font-size: 1.25rem;
        }

        .heart-icon {
            color: #ec4899;
            font-size: 1.5rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.75rem;
            border-radius: 12px;
            background: rgba(124, 58, 237, 0.1);
            color: var(--text-primary);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--primary-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
        }

        /* === Main Container === */
        .results-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: calc(var(--navbar-height) + 2rem) 1rem 3rem;
        }

        /* === Card System === */
        .result-card {
            background: var(--bg-card);
            backdrop-filter: blur(15px);
            border-radius: 24px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-primary);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .result-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        /* === Two Column Layout System === */
        .two-column-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .column-card {
            background: var(--bg-card);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 1.5rem;
            box-shadow: var(--shadow-primary);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .column-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        /* === Hero Success Dashboard === */
        .hero-dashboard {
            text-align: center;
            padding: 3rem 2rem;
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.05) 0%, rgba(236, 72, 153, 0.05) 100%);
            position: relative;
        }

        .success-meter {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto 2rem;
        }

        .success-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(from 0deg, #ec4899 0%, #8b5cf6 76%, #f3f4f6 76%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            animation: scaleIn 1s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .success-circle::before {
            content: '';
            position: absolute;
            inset: 20px;
            background: white;
            border-radius: 50%;
        }

        .success-percentage {
            position: absolute;
            font-size: 3rem;
            font-weight: 800;
            color: #7c3aed;
            z-index: 2;
        }

        .relationship-status {
            margin-bottom: 1rem;
        }

        .status-badge {
            display: inline-block;
            padding: 0.75rem 2rem;
            background: var(--primary-gradient);
            color: white;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 700;
            box-shadow: 0 8px 25px rgba(236, 72, 153, 0.3);
        }

        .hero-insight {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 1.5rem 0;
            line-height: 1.4;
        }

        .confidence-level {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            color: var(--success-color);
            font-weight: 600;
            font-size: 1.1rem;
        }

        /* === Chart Containers === */
        .chart-container {
            position: relative;
            height: 300px;
            margin: 1rem 0;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 16px;
            padding: 1rem;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .chart-title {
            text-align: center;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        /* === Section Headers === */
        .section-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
        }

        .section-icon {
            width: 40px;
            height: 40px;
            background: var(--primary-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }

        .section-title h3 {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .section-subtitle {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* === Signal Components === */
        .signal-list {
            list-style: none;
        }

        .signal-item {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .signal-item:last-child {
            border-bottom: none;
        }

        .signal-icon {
            flex-shrink: 0;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.8rem;
            margin-top: 0.2rem;
        }

        .positive-signal .signal-icon {
            background: var(--success-color);
        }

        .warning-signal .signal-icon {
            background: var(--warning-color);
        }

        .signal-content {
            flex: 1;
        }

        .signal-text {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .signal-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        .confidence-indicator {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            margin-top: 0.5rem;
        }

        .confidence-stars {
            color: #fbbf24;
        }

        /* === Favorite Message Component === */
        .favorite-message {
            background: linear-gradient(135deg, rgba(236, 72, 153, 0.05), rgba(139, 92, 246, 0.05));
            border: 2px solid rgba(236, 72, 153, 0.2);
            border-radius: 16px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .message-badge {
            background: var(--primary-gradient);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 1rem;
        }

        .message-text {
            background: white;
            padding: 1rem 1.25rem;
            border-radius: 12px;
            font-style: italic;
            color: var(--text-primary);
            border-left: 4px solid #ec4899;
            margin: 1rem 0;
            position: relative;
            font-size: 1.05rem;
            line-height: 1.5;
        }

        .message-meta {
            font-size: 0.85rem;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* === Conversation Guide === */
        .conversation-examples {
            display: grid;
            gap: 1rem;
        }

        .conversation-item {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 12px;
            padding: 1rem;
            border-left: 4px solid var(--info-color);
        }

        .conversation-type {
            font-weight: 600;
            color: var(--info-color);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .conversation-text {
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .conversation-timing {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* === Advice Component === */
        .advice-item {
            background: rgba(245, 158, 11, 0.05);
            border: 1px solid rgba(245, 158, 11, 0.2);
            border-radius: 12px;
            padding: 1rem;
            margin: 0.75rem 0;
        }

        .advice-title {
            font-weight: 600;
            color: var(--warning-color);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .advice-content {
            color: var(--text-primary);
            font-size: 0.95rem;
            line-height: 1.4;
        }

        /* === Sticky Note Style === */
        .sticky-note {
            background: #ffeb3b;
            color: #333;
            font-family: 'Malgun Gothic', sans-serif;
            padding: 1.2rem 1.5rem;
            margin: 2rem 0;
            transform: rotate(-1deg);
            border-radius: 0;
            box-shadow: 3px 3px 8px rgba(0,0,0,0.2);
            position: relative;
            border: 1px solid #f9c74f;
        }

        .sticky-note::before {
            content: 'ğŸ“Œ';
            position: absolute;
            top: -8px;
            right: 15px;
            font-size: 1.3rem;
        }

        /* === Action Buttons === */
        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 2rem;
        }

        .btn-primary, .btn-secondary {
            padding: 1rem 2rem;
            border-radius: 16px;
            font-weight: 700;
            font-size: 1.05rem;
            cursor: pointer;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
            border: none;
            box-shadow: 0 8px 25px rgba(236, 72, 153, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(236, 72, 153, 0.4);
        }

        .btn-secondary {
            background: transparent;
            color: #7c3aed;
            border: 2px solid rgba(124, 58, 237, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(124, 58, 237, 0.1);
            border-color: rgba(124, 58, 237, 0.5);
            transform: translateY(-1px);
        }

        /* === Animations === */
        @keyframes scaleIn {
            from {
                transform: scale(0.8);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* === Responsive Design === */
        @media (max-width: 768px) {
            .results-container {
                padding: calc(var(--navbar-height) + 1rem) 0.5rem 2rem;
            }

            .two-column-grid,
            .action-buttons {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .result-card,
            .column-card {
                padding: 1.5rem;
                border-radius: 20px;
            }

            .hero-dashboard {
                padding: 2rem 1rem;
            }

            .success-meter {
                width: 160px;
                height: 160px;
            }

            .success-percentage {
                font-size: 2.5rem;
            }

            .hero-insight {
                font-size: 1.1rem;
            }

            .chart-container {
                height: 250px;
                padding: 0.75rem;
            }
        }

        /* === Enhanced Accessibility === */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: var(--color-primary-600);
            color: white;
            padding: 8px;
            text-decoration: none;
            border-radius: 4px;
            z-index: 9999;
        }
        
        .skip-link:focus {
            top: 6px;
        }
        
        /* Enhanced focus styles */
        button:focus,
        .btn-primary:focus,
        .btn-secondary:focus,
        a:focus {
            outline: var(--focus-outline);
            outline-offset: var(--focus-outline-offset);
        }
        
        /* Focus indicators for interactive elements */
        .result-card:focus-within {
            outline: 2px solid var(--color-primary-500);
            outline-offset: 2px;
        }
        
        /* Reduced motion preferences */
        @media (prefers-reduced-motion: reduce) {
            .success-circle {
                animation: none;
            }
            
            .result-card,
            .column-card {
                transition: none;
            }
        }
        
        /* High contrast mode enhancements */
        @media (prefers-contrast: high) {
            .signal-icon,
            .section-icon {
                border: 2px solid currentColor;
            }
            
            .btn-primary,
            .btn-secondary {
                border: 2px solid currentColor;
            }
        }
        
        /* Print styles */
        @media print {
            .navbar,
            .action-buttons {
                display: none;
            }
            
            .results-container {
                padding-top: 0;
            }
            
            .result-card,
            .column-card {
                box-shadow: none;
                border: 1px solid #000;
                background: white;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="/DateGenie/index.html" class="brand-logo">
                <i class="fas fa-heart heart-icon"></i>
                <span>Date Genie</span>
            </a>
            <div class="user-info">
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <span id="userName">ì‚¬ìš©ìë‹˜</span>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="results-container">
        <!-- 1. í˜¸ê°ë„ (ìµœìƒë‹¨) -->
        <div class="result-card hero-dashboard">
            <div class="relationship-status">
                <div class="status-badge" id="relationshipStage">ì¸ ê°€ëŠ¥ì„± ë†’ìŒ</div>
            </div>
            
            <div class="success-meter">
                <div class="success-circle" id="successCircle">
                    <div class="success-percentage" id="successPercentage">76%</div>
                </div>
            </div>

            <h1 class="hero-insight" id="heroInsight">
                ìƒëŒ€ë°©ì´ ë‹¹ì‹ ì—ê²Œ í˜¸ê°ì„ ê°€ì§€ê³  ìˆì„ í™•ë¥ ì´ ë†’ìŠµë‹ˆë‹¤
            </h1>

            <div class="confidence-level">
                <i class="fas fa-shield-check"></i>
                <span>ë¶„ì„ ì‹ ë¢°ë„: <strong id="confidenceLevel">83%</strong></span>
            </div>
        </div>

        <!-- 2. í˜¸ê°ë„ ë³€í™” ì¶”ì´ + ê°ì •ë¶„ì„ (2ì—´) -->
        <div class="two-column-grid">
            <div class="column-card">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="section-title">
                        <h3>í˜¸ê°ë„ ë³€í™” ì¶”ì´</h3>
                        <p class="section-subtitle">ìµœê·¼ 10ì¼ê°„ ê´€ì‹¬ë„ ë³€í™”</p>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="interestChart"></canvas>
                </div>
            </div>

            <div class="column-card">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="section-title">
                        <h3>ê°ì • ë¶„ì„</h3>
                        <p class="section-subtitle">ëŒ€í™” í†¤ ê°ì • ë¶„í¬</p>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="emotionChart"></canvas>
                </div>
            </div>
        </div>

        <!-- 3. ë°œê²¬ëœ í˜¸ê° ì‹ í˜¸ + ëŒ€í‘œ í˜¸ê°ë¬¸ì¥ (2ì—´) -->
        <div class="two-column-grid">
            <div class="column-card">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="section-title">
                        <h3>ë°œê²¬ëœ í˜¸ê° ì‹ í˜¸</h3>
                        <p class="section-subtitle">ê¸ì •ì  ì‹ í˜¸ ë¶„ì„</p>
                    </div>
                </div>
                <ul class="signal-list" id="positiveSignals">
                    <!-- ë™ì  ìƒì„± -->
                </ul>
            </div>

            <div class="column-card">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-quote-right"></i>
                    </div>
                    <div class="section-title">
                        <h3>ëŒ€í‘œ í˜¸ê°ë¬¸ì¥</h3>
                        <p class="section-subtitle">ê°€ì¥ í˜¸ê°ë„ê°€ ë†’ì€ ë©”ì‹œì§€</p>
                    </div>
                </div>
                <div class="favorite-message" id="favoriteMessage">
                    <!-- ë™ì  ìƒì„± -->
                </div>
            </div>
        </div>

        <!-- 4. ì‹¤ì „ ëŒ€í™” ê°€ì´ë“œ + ë§ì¶¤ ì¡°ì–¸ (2ì—´) -->
        <div class="two-column-grid">
            <div class="column-card">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <div class="section-title">
                        <h3>ì‹¤ì „ ëŒ€í™” ê°€ì´ë“œ</h3>
                        <p class="section-subtitle">ë°”ë¡œ ì‚¬ìš©í•  ë©”ì‹œì§€</p>
                    </div>
                </div>
                <div class="conversation-examples" id="conversationGuide">
                    <!-- ë™ì  ìƒì„± -->
                </div>
            </div>

            <div class="column-card">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <div class="section-title">
                        <h3>ë§ì¶¤ ì¡°ì–¸</h3>
                        <p class="section-subtitle">ìƒí™©ë³„ ì¶”ì²œ í–‰ë™</p>
                    </div>
                </div>
                <div class="advice-list" id="customAdvice">
                    <!-- ë™ì  ìƒì„± -->
                </div>
            </div>
        </div>

        <!-- 5. ìŠ¤í‹°í‚¤ ë…¸íŠ¸ -->
        <div class="sticky-note">
            ğŸ“ ì°¸ê³ : ì´ ëª¨ë“  ê±´ ì œ ê°œì¸ì ì¸ ì˜ê²¬ì´ì—ìš”! 100% ë§ë‹¤ëŠ” ë³´ì¥ì€ ì—†ì–´ìš” ã…‹ã…‹ ê·¸ë˜ë„ ì°¸ê³ ëŠ” ë˜ì‹¤ ê±°ì˜ˆìš”?
        </div>

        <!-- 6. ìƒˆë¡œìš´ ë¶„ì„ + ë¶„ì„ íˆìŠ¤í† ë¦¬ (2ì—´) -->
        <div class="action-buttons">
            <a href="/DateGenie/upload.html" class="btn-primary">
                <i class="fas fa-upload"></i>
                ìƒˆë¡œìš´ ë¶„ì„í•˜ê¸°
            </a>
            <a href="/DateGenie/dashboard.html" class="btn-secondary">
                <i class="fas fa-chart-line"></i>
                ë¶„ì„ íˆìŠ¤í† ë¦¬ ë³´ê¸°
            </a>
        </div>
    </div>

    <!-- Screen Reader Announcements -->
    <div class="sr-only" aria-live="polite" id="announcements"></div>

    <script>
        // === ë™ì  ë°ì´í„° ë¡œë”© ===
        let analysisData = null;
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë¶„ì„ ë°ì´í„° ì´ˆê¸°í™”
        async function initializeAnalysisData() {
            try {
                // URLì—ì„œ sessionId íŒŒë¼ë¯¸í„° í™•ì¸
                const urlParams = new URLSearchParams(window.location.search);
                const sessionId = urlParams.get('sessionId');
                
                console.log('ë°ì´í„° ì´ˆê¸°í™” ì‹œì‘ - sessionId:', sessionId);
                
                if (sessionId) {
                    // 1. ìš°ì„  APIì—ì„œ ìµœì‹  ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹œë„
                    console.log('APIì—ì„œ ë¶„ì„ ë°ì´í„° ë¡œë“œ ì‹œë„:', sessionId);
                    try {
                        analysisData = await fetchAnalysisResult(sessionId);
                        
                        if (analysisData && Object.keys(analysisData).length > 0) {
                            // APIì—ì„œ ì„±ê³µì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ ê²½ìš° localStorageì— ì €ì¥
                            localStorage.setItem('analysisResult', JSON.stringify(analysisData));
                            localStorage.setItem('analysisSessionId', sessionId);
                            console.log('API ë°ì´í„° ë¡œë“œ ì„±ê³µ ë° localStorage ì €ì¥ ì™„ë£Œ');
                        } else {
                            throw new Error('APIì—ì„œ ë¹ˆ ë°ì´í„° ì‘ë‹µ');
                        }
                    } catch (apiError) {
                        console.warn('API ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨, localStorage í™•ì¸:', apiError.message);
                        
                        // 2. API ì‹¤íŒ¨ì‹œ localStorageì—ì„œ í™•ì¸
                        const storedResult = localStorage.getItem('analysisResult');
                        const storedSessionId = localStorage.getItem('analysisSessionId');
                        
                        if (storedResult && storedSessionId === sessionId) {
                            console.log('localStorageì—ì„œ ì¼ì¹˜í•˜ëŠ” ë°ì´í„° ë°œê²¬');
                            analysisData = JSON.parse(storedResult);
                        } else {
                            throw new Error('ë¡œì»¬ ì €ì¥ì†Œì— ì¼ì¹˜í•˜ëŠ” ë°ì´í„° ì—†ìŒ');
                        }
                    }
                } else {
                    // sessionIdê°€ ì—†ëŠ” ê²½ìš° localStorageì—ì„œ ìµœê·¼ ë¶„ì„ ê²°ê³¼ í™•ì¸
                    const storedResult = localStorage.getItem('analysisResult');
                    
                    if (storedResult) {
                        console.log('sessionId ì—†ìŒ, localStorageì—ì„œ ìµœê·¼ ë°ì´í„° ì‚¬ìš©');
                        analysisData = JSON.parse(storedResult);
                    } else {
                        console.log('ì €ì¥ëœ ë°ì´í„° ì—†ìŒ, ì—…ë¡œë“œ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸');
                        window.location.href = '/DateGenie/upload.html?message=ë¶„ì„í•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤';
                        return;
                    }
                }
                
                // ë°ì´í„° ê²€ì¦ ë° ê¸°ë³¸ê°’ ì„¤ì •
                analysisData = validateAndNormalizeData(analysisData);
                
                console.log('ìµœì¢… ë¶„ì„ ë°ì´í„°:', analysisData);
                
            } catch (error) {
                console.error('ë¶„ì„ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                
                // ìµœì¢… ì‹¤íŒ¨ì‹œ ì²˜ë¦¬
                console.log('ëª¨ë“  ë°ì´í„° ë¡œë“œ ë°©ë²• ì‹¤íŒ¨, ì—…ë¡œë“œ í˜ì´ì§€ë¡œ ì´ë™');
                
                // ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ í›„ ì—…ë¡œë“œ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
                alert('ë¶„ì„ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ ë¶„ì„ì„ ì‹œì‘í•´ì£¼ì„¸ìš”.');
                window.location.href = '/DateGenie/upload.html?message=ë¶„ì„ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤';
                return;
            }
        }
        
        // APIì—ì„œ ë¶„ì„ ê²°ê³¼ ê°€ì ¸ì˜¤ê¸° (Anthropic + ê¸°ì¡´ ì§€ì›)
        async function fetchAnalysisResult(sessionId) {
            try {
                console.log('API í˜¸ì¶œ ì‹œì‘ - sessionId:', sessionId);
                
                // ìš°ì„  Anthropic ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì‹œë„
                let response = await fetch(`/DateGenie/AnthropicAnalysisController?action=getResult&sessionId=${sessionId}`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json; charset=UTF-8',
                        'Accept': 'application/json'
                    },
                    credentials: 'same-origin'
                });
                
                console.log('Anthropic API ì‘ë‹µ ìƒíƒœ:', response.status);
                
                // Anthropic API ì‹¤íŒ¨ì‹œ ê¸°ì¡´ AnalysisServiceë¡œ í´ë°±
                if (!response.ok || response.status !== 200) {
                    console.log('Anthropic API ì‹¤íŒ¨, ê¸°ì¡´ AnalysisServiceë¡œ í´ë°± ì‹œë„');
                    
                    response = await fetch(`/DateGenie/AnalysisService?action=getResult&sessionId=${sessionId}`, {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json; charset=UTF-8',
                            'Accept': 'application/json'
                        },
                        credentials: 'same-origin'
                    });
                    
                    console.log('ê¸°ì¡´ API ì‘ë‹µ ìƒíƒœ:', response.status);
                }
                
                if (!response.ok) {
                    if (response.status === 404) {
                        throw new Error('ë¶„ì„ ê²°ê³¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    } else if (response.status === 401) {
                        window.location.href = '/DateGenie/login.html?message=ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤';
                        return;
                    } else {
                        throw new Error(`ì„œë²„ ì˜¤ë¥˜: ${response.status} ${response.statusText}`);
                    }
                }
                
                const result = await response.json();
                console.log('API ì‘ë‹µ ë°ì´í„°:', result);
                
                if (!result.success) {
                    throw new Error(result.message || 'ë¶„ì„ ê²°ê³¼ ì¡°íšŒì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
                
                if (!result.analysisData || Object.keys(result.analysisData).length === 0) {
                    throw new Error('ë¶„ì„ ë°ì´í„°ê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.');
                }
                
                console.log('APIì—ì„œ ì„±ê³µì ìœ¼ë¡œ ë°ì´í„° ìˆ˜ì‹ :', Object.keys(result.analysisData));
                return result.analysisData;
                
            } catch (error) {
                console.error('fetchAnalysisResult ì˜¤ë¥˜:', error);
                throw error;
            }
        }
        
        // í–¥ìƒëœ ë°ì´í„° ê²€ì¦ ë° ì •ê·œí™” ì‹œìŠ¤í…œ
        function validateAndNormalizeData(data) {
            console.log('ë°ì´í„° ê²€ì¦ ì‹œì‘:', data);
            
            // ë°ì´í„° ë¬´ê²°ì„± ê²€ì‚¬
            const dataIntegrityScore = calculateDataIntegrity(data);
            console.log('ë°ì´í„° ë¬´ê²°ì„± ì ìˆ˜:', dataIntegrityScore);
            
            // ìƒˆë¡œìš´ JSON ìŠ¤í‚¤ë§ˆì— ë§ê²Œ ë°ì´í„° ë§¤í•‘
            const mainResults = data.mainResults || {};
            const emotionAnalysis = data.emotionAnalysis || {};
            
            // ê¸°ë³¸ êµ¬ì¡° í™•ì¸ ë° ê¸°ë³¸ê°’ ì„¤ì •
            const normalized = {
                successRate: validateNumericRange(mainResults.successRate, 0, 100, 0),
                confidenceLevel: validateNumericRange(mainResults.confidenceLevel, 0, 100, 0),
                relationshipStage: mainResults.relationshipStage || "ë¶„ì„ ì¤‘",
                heroInsight: mainResults.heroInsight || mainResults.summary || "ë¶„ì„ì„ ì§„í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤.",
                dataQualityScore: dataIntegrityScore,
                
                interestTrendData: validateTrendData(data.interestTrends),
                emotionData: validateEmotionData(emotionAnalysis),
                positiveSignals: validateSignalsData(data.positiveSignals),
                favoriteMessage: data.favoriteMessage || {
                    text: "ë¶„ì„ëœ ë©”ì‹œì§€ê°€ ì—†ìŠµë‹ˆë‹¤.",
                    confidence: 0,
                    date: "ë‚ ì§œ ì—†ìŒ",
                    reason: "ë©”ì‹œì§€ ë¶„ì„ ì¤‘"
                },
                conversationGuide: data.conversationGuides || [],
                customAdvice: data.customAdvice || []
            };
            
            // ë¹ˆ ë°ì´í„°ì— ëŒ€í•œ ê¸°ë³¸ê°’ ì„¤ì •
            if (normalized.interestTrendData.length === 0) {
                normalized.interestTrendData = getDefaultTrendData();
            }
            
            if (normalized.conversationGuide.length === 0) {
                normalized.conversationGuide = getDefaultConversationGuide();
            }
            
            if (normalized.customAdvice.length === 0) {
                normalized.customAdvice = getDefaultCustomAdvice();
            }
            
            // ìµœì¢… ë°ì´í„° ë¬´ê²°ì„± ì¬ê²€ì¦
            const finalIntegrityCheck = performFinalValidation(normalized);
            if (!finalIntegrityCheck.valid) {
                console.warn('ë°ì´í„° ë¬´ê²°ì„± ê²½ê³ :', finalIntegrityCheck.issues);
                // ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ (UI ê°œì„  ì „ì—ëŠ” ì£¼ì„ ì²˜ë¦¬)
                // showDataQualityWarning(finalIntegrityCheck.issues);
            }
            
            console.log('ì •ê·œí™” ì™„ë£Œ:', normalized);
            return normalized;
        }
        
        // ìˆ˜ì¹˜ ë²”ìœ„ ê²€ì¦ í•¨ìˆ˜
        function validateNumericRange(value, min, max, defaultValue) {
            const num = Number(value);
            if (isNaN(num) || num < min || num > max) {
                console.warn(`ìˆ˜ì¹˜ ë²”ìœ„ ì˜¤ë¥˜: ${value} (ë²”ìœ„: ${min}-${max})`);
                return defaultValue;
            }
            return Math.round(num * 10) / 10; // ì†Œìˆ˜ì  1ìë¦¬ë¡œ ì œí•œ
        }
        
        // ì¶”ì´ ë°ì´í„° ê²€ì¦
        function validateTrendData(trendData) {
            if (!Array.isArray(trendData) || trendData.length === 0) {
                return getDefaultTrendData();
            }
            
            return trendData.map(item => ({
                date: item.date || 'ë‚ ì§œ ì—†ìŒ',
                value: validateNumericRange(item.value, 0, 100, 0),
                messageCount: validateNumericRange(item.messageCount, 0, 1000, 0),
                avgResponseTime: validateNumericRange(item.avgResponseTime, 0, 1440, 0) // 24ì‹œê°„ ìµœëŒ€
            }));
        }
        
        // ê°ì • ë°ì´í„° ê²€ì¦
        function validateEmotionData(emotionData) {
            if (!emotionData || typeof emotionData !== 'object') {
                return { positive: 0, neutral: 0, negative: 0 };
            }
            
            const positive = validateNumericRange(emotionData.positive, 0, 100, 0);
            const neutral = validateNumericRange(emotionData.neutral, 0, 100, 0);
            const negative = validateNumericRange(emotionData.negative, 0, 100, 0);
            
            // í•©ê³„ 100% ë§ì¶”ê¸°
            const total = positive + neutral + negative;
            if (total === 0) {
                return { positive: 0, neutral: 0, negative: 0 };
            }
            
            return {
                positive: Math.round((positive / total) * 1000) / 10,
                neutral: Math.round((neutral / total) * 1000) / 10,
                negative: Math.round((negative / total) * 1000) / 10
            };
        }
        
        // ì‹ í˜¸ ë°ì´í„° ê²€ì¦
        function validateSignalsData(signalsData) {
            if (!Array.isArray(signalsData) || signalsData.length === 0) {
                return [];
            }
            
            return signalsData.map(signal => ({
                text: signal.text || 'ì•Œ ìˆ˜ ì—†ëŠ” ì‹ í˜¸',
                description: signal.description || 'ì„¤ëª… ì—†ìŒ',
                confidence: validateNumericRange(signal.confidence, 1, 5, 1),
                type: signal.type || 'unknown',
                metricValue: signal.metricValue || 0,
                metricUnit: signal.metricUnit || ''
            }));
        }
        
        // ë°ì´í„° ë¬´ê²°ì„± ê³„ì‚°
        function calculateDataIntegrity(data) {
            let score = 100;
            
            // API ì‘ë‹µ êµ¬ì¡°ì— ë§ê²Œ mainResultsì—ì„œ í•„ë“œ ê²€ì‚¬
            const mainResults = data.mainResults || {};
            const requiredFields = ['successRate', 'confidenceLevel', 'relationshipStage', 'heroInsight'];
            
            requiredFields.forEach(field => {
                if (!mainResults[field] && !data[field]) score -= 10;
            });
            
            // ë°ì´í„° íƒ€ì… ê²€ì‚¬ (mainResults ìš°ì„ , ì—†ìœ¼ë©´ dataì—ì„œ)
            const successRate = mainResults.successRate || data.successRate;
            const confidenceLevel = mainResults.confidenceLevel || data.confidenceLevel;
            
            if (typeof successRate !== 'number') score -= 5;
            if (typeof confidenceLevel !== 'number') score -= 5;
            
            // ë°ì´í„° ë…¼ë¦¬ì„± ê²€ì‚¬
            if (successRate > 100 || successRate < 0) score -= 15;
            if (confidenceLevel > 100 || confidenceLevel < 0) score -= 15;
            
            return Math.max(0, score);
        }
        
        // ìµœì¢… ê²€ì¦
        function performFinalValidation(data) {
            const issues = [];
            
            if (data.dataQualityScore < 80) {
                issues.push('ë°ì´í„° í’ˆì§ˆì´ ë‚®ìŠµë‹ˆë‹¤.');
            }
            
            if (data.successRate === 0 && data.confidenceLevel === 0) {
                issues.push('ë¶„ì„ ë°ì´í„°ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.');
            }
            
            return {
                valid: issues.length === 0,
                issues: issues
            };
        }
        
        // ê¸°ë³¸ ì¶”ì´ ë°ì´í„°
        function getDefaultTrendData() {
            return [
                { date: '8ì›” 13ì¼', value: 45 },
                { date: '8ì›” 14ì¼', value: 52 },
                { date: '8ì›” 15ì¼', value: 48 },
                { date: '8ì›” 16ì¼', value: 58 },
                { date: '8ì›” 17ì¼', value: 62 },
                { date: '8ì›” 18ì¼', value: 59 },
                { date: '8ì›” 19ì¼', value: 67 },
                { date: '8ì›” 20ì¼', value: 71 },
                { date: '8ì›” 21ì¼', value: 69 },
                { date: '8ì›” 22ì¼', value: 76 }
            ];
        }
        
        // ê¸°ë³¸ ëŒ€í™” ê°€ì´ë“œ
        function getDefaultConversationGuide() {
            return [
                {
                    type: "ì¼ìƒ ê³µìœ ",
                    text: "ì˜¤ëŠ˜ í•˜ë£¨ ì–´ë•Œ? ë‚˜ëŠ” ì¢‹ì€ ì¼ì´ ìˆì–´ì„œ ê¸°ë¶„ì´ ì¢‹ì•„ ã…ã…",
                    timing: "ì˜¤í›„ 6-9ì‹œ ì¶”ì²œ",
                    category: "casual",
                    difficultyLevel: 1
                },
                {
                    type: "ê´€ì‹¬ì‚¬ ì§ˆë¬¸",
                    text: "ìš”ì¦˜ ë­ ì¬ë°ŒëŠ” ê±° ìˆì–´? ë‚˜ë„ ìƒˆë¡œìš´ ê±° ì°¾ê³  ìˆì–´ì„œ~",
                    timing: "ì €ë… ì‹œê°„ëŒ€",
                    category: "interest",
                    difficultyLevel: 2
                },
                {
                    type: "ê°€ë²¼ìš´ ì œì•ˆ",
                    text: "ë‚ ì”¨ ì¢‹ì€ ë‚  ì‚°ì±…ì´ë¼ë„ í•œë²ˆ í•´ë³¼ê¹Œ? ë¶€ë‹´ì—†ì´~",
                    timing: "ì£¼ë§ ì˜¤ì „",
                    category: "meetup",
                    difficultyLevel: 3
                }
            ];
        }
        
        // ê¸°ë³¸ ë§ì¶¤ ì¡°ì–¸
        function getDefaultCustomAdvice() {
            return [
                {
                    title: "í˜„ì¬ ë‹¨ê³„ì—ì„œëŠ”",
                    content: "ìì—°ìŠ¤ëŸ½ê³  ë¶€ë‹´ìŠ¤ëŸ½ì§€ ì•Šì€ ëŒ€í™”ë¥¼ ì´ì–´ê°€ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ìƒëŒ€ë°©ì˜ ë°˜ì‘ì„ ì‚´í”¼ë©° ì ì§„ì ìœ¼ë¡œ ê´€ì‹¬ì„ í‘œí˜„í•˜ì„¸ìš”.",
                    type: "current_stage",
                    priority: 1,
                    urgency: "Medium"
                },
                {
                    title: "ë‹¤ìŒ ë‹¨ê³„ ì¤€ë¹„",
                    content: "ê³µí†µ ê´€ì‹¬ì‚¬ë¥¼ ì°¾ì•„ ê°€ë²¼ìš´ í™œë™ì„ í•¨ê»˜ í•  ìˆ˜ ìˆëŠ” ê¸°íšŒë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”.",
                    type: "next_step",
                    priority: 2,
                    urgency: "Low"
                },
                {
                    title: "ì£¼ì˜ì‚¬í•­",
                    content: "ë„ˆë¬´ ê¸‰í•˜ê²Œ ê´€ê³„ë¥¼ ë°œì „ì‹œí‚¤ë ¤ í•˜ì§€ ë§ê³ , ìƒëŒ€ë°©ì˜ í˜ì´ìŠ¤ë¥¼ ì¡´ì¤‘í•˜ë©° ì†Œí†µí•˜ì„¸ìš”.",
                    type: "caution",
                    priority: 3,
                    urgency: "Medium"
                }
            ];
        }
        
        // ë°ëª¨/ê¸°ë³¸ ë°ì´í„°
        function getDefaultAnalysisData() {
            return {
                successRate: 76,
                confidenceLevel: 83,
                relationshipStage: "ì¸ ê°€ëŠ¥ì„± ë†’ìŒ",
                heroInsight: "ìƒëŒ€ë°©ì´ ë‹¹ì‹ ì—ê²Œ í˜¸ê°ì„ ê°€ì§€ê³  ìˆì„ í™•ë¥ ì´ ë†’ìŠµë‹ˆë‹¤",
                
                interestTrendData: getDefaultTrendData(),
                
                emotionData: {
                    positive: 64,
                    neutral: 23,
                    negative: 13
                },
                
                positiveSignals: [
                    {
                        text: "ì‘ë‹µ ì†ë„ í–¥ìƒ",
                        description: "í‰ê·  ì‘ë‹µ ì‹œê°„ì´ 3ë¶„ ì´ë‚´ë¡œ ë‹¨ì¶•ë¨",
                        confidence: 5
                    },
                    {
                        text: "ì´ëª¨í‹°ì½˜ ì‚¬ìš© ì¦ê°€",
                        description: "ëŒ€í™”ì—ì„œ ì´ëª¨í‹°ì½˜ ì‚¬ìš© ë¹ˆë„ê°€ 40% ì¦ê°€",
                        confidence: 4
                    },
                    {
                        text: "ê°œì¸ì  ì§ˆë¬¸ ì¦ê°€",
                        description: "ì¼ìƒì´ë‚˜ ê·¼í™©ì— ëŒ€í•œ ì§ˆë¬¸ì´ ëŠ˜ì–´ë‚¨",
                        confidence: 4
                    },
                    {
                        text: "ë¯¸ë˜ ê³„íš ì–¸ê¸‰",
                        description: "í•¨ê»˜í•  í™œë™ì— ëŒ€í•œ ì–¸ê¸‰ì´ ìì£¼ ë‚˜íƒ€ë‚¨",
                        confidence: 5
                    }
                ],
                
                favoriteMessage: {
                    text: "ì•„ ì˜¤ëŠ˜ ì§€ë‚˜ê°€ë‹¤ê°€ ê·¸ ì¹´í˜ ë´¤ëŠ”ë° ë„ˆ ìƒê°ë‚¬ì–´ ã…‹ã…‹ ì–¸ì œ ê°™ì´ ê°€ë³¼ê¹Œ? ğŸ˜Š",
                    confidence: 92,
                    date: "8ì›” 20ì¼ ì˜¤í›„ 3:24",
                    reason: "ìì—°ìŠ¤ëŸ¬ìš´ ë§Œë‚¨ ì œì•ˆê³¼ ê°œì¸ì  ê´€ì‹¬ í‘œí˜„"
                },
                
                conversationGuide: getDefaultConversationGuide(),
                
                customAdvice: [
                    {
                        title: "ì§€ê¸ˆ ë‹¨ê³„ì—ì„œëŠ”",
                        content: "ìƒëŒ€ë°©ì´ ë³´ë‚´ëŠ” ê¸ì •ì  ì‹ í˜¸ë¥¼ ë†“ì¹˜ì§€ ë§ê³ , ìì—°ìŠ¤ëŸ½ê²Œ ëŒ€í™”ë¥¼ ì´ì–´ê°€ì„¸ìš”. ë„ˆë¬´ ê¸‰í•˜ì§€ ì•Šê²Œ!"
                    },
                    {
                        title: "ë‹¤ìŒ ìŠ¤í…",
                        content: "ê³µí†µ ê´€ì‹¬ì‚¬ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ê°€ë²¼ìš´ ë§Œë‚¨ì„ ì œì•ˆí•´ë³´ì„¸ìš”. ë¶€ë‹´ìŠ¤ëŸ½ì§€ ì•Šì€ ì„ ì—ì„œ ì‹œì‘í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤."
                    },
                    {
                        title: "ì£¼ì˜ì‚¬í•­",
                        content: "ë°¤ëŠ¦ì€ ì‹œê°„ ì—°ë½ì€ ì¡°ê¸ˆ ì¤„ì´ê³ , ìƒëŒ€ë°©ì˜ ìƒí™œ íŒ¨í„´ì„ ì¡´ì¤‘í•˜ëŠ” ëª¨ìŠµì„ ë³´ì—¬ì£¼ì„¸ìš”."
                    }
                ]
            };
        }

        // === UI Controllers ===
        class ResultsFinalController {
            constructor(data) {
                this.data = data;
                this.init();
            }

            init() {
                // ë°ì´í„° í’ˆì§ˆ ì±„í¬
                this.performQualityCheck();
                
                // ì ‘ê·¼ì„± ì´ˆê¸°í™”
                this.setupAccessibility();
                
                // UI ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
                this.updateHeroDashboard();
                this.renderSignals();
                this.renderFavoriteMessage();
                this.renderConversationGuide();
                this.renderCustomAdvice();
                
                // ì¸í„°ë ‰ì…˜ ë° ì• ë‹ˆë©”ì´ì…˜
                this.setupInteractions();
                this.startAnimations();
                
                // ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
                this.setupPerformanceMonitoring();
                
                // ì ì§„ì  ê°•í™” - ì°¨íŠ¸ ë Œë”ë§ì„ ëŒ€ì—­í­ ë° ê¸°ê¸° ì„±ëŠ¥ì„ ê³ ë ¤í•˜ì—¬ ì§€ì—° ì²˜ë¦¬
                this.scheduleChartInitialization();
            }
            
            performQualityCheck() {
                console.log('ë°ì´í„° í’ˆì§ˆ ì±„í¬:', this.data.dataQualityScore || 'ì ìˆ˜ ì—†ìŒ');
                
                if (this.data.dataQualityScore && this.data.dataQualityScore < 70) {
                    this.showQualityWarning();
                }
            }
            
            setupAccessibility() {
                // ARIA labels ë° ì—­í•  ì„¤ì •
                document.querySelectorAll('.chart-container canvas').forEach((canvas, index) => {
                    canvas.setAttribute('role', 'img');
                    canvas.setAttribute('aria-label', `ë¶„ì„ ì°¨íŠ¸ ${index + 1}`);
                });
                
                // í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ê°œì„ 
                this.setupKeyboardNavigation();
                
                // ìŠ¤í¬ë¦° ë¦¬ë” ê³µì§€ì‚¬í•­ ì„¤ì •
                this.setupScreenReaderAnnouncements();
            }
            
            setupKeyboardNavigation() {
                // ì¹´ë“œì— tabindex ì¶”ê°€ë¡œ í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ê°€ëŠ¥
                document.querySelectorAll('.result-card, .column-card').forEach(card => {
                    card.setAttribute('tabindex', '0');
                    card.setAttribute('role', 'article');
                });
            }
            
            setupScreenReaderAnnouncements() {
                const announcements = document.getElementById('announcements');
                if (announcements) {
                    // ì´ˆê¸° ë¡œë“œ ì™„ë£Œ ê³µì§€
                    setTimeout(() => {
                        announcements.textContent = 'ë¶„ì„ ê²°ê³¼ í˜ì´ì§€ê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.';
                    }, 1000);
                }
            }
            
            setupPerformanceMonitoring() {
                // ì„±ëŠ¥ ì¸¡ì • ì‹œì‘
                performance.mark('results-page-start');
                
                // ë Œë”ë§ ì™„ë£Œ í›„ ì„±ëŠ¥ ì¸¡ì •
                requestAnimationFrame(() => {
                    performance.mark('results-page-end');
                    performance.measure('results-page-render', 'results-page-start', 'results-page-end');
                    
                    const measure = performance.getEntriesByName('results-page-render')[0];
                    console.log(`í˜ì´ì§€ ë Œë”ë§ ì‹œê°„: ${measure.duration.toFixed(2)}ms`);
                });
            }
            
            scheduleChartInitialization() {
                // ë„¤íŠ¸ì›Œí¬ ë° ê¸°ê¸° ìƒíƒœì— ë”°ë¥¸ ìµœì í™”
                const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
                let delay = 1000; // ê¸°ë³¸ ì§€ì—°
                
                if (connection) {
                    // ëŠë¦° ë„¤íŠ¸ì›Œí¬ì—ì„œëŠ” ë” ì˜¤ë˜ ëŒ€ê¸°
                    if (connection.effectiveType === 'slow-2g' || connection.effectiveType === '2g') {
                        delay = 2000;
                    } else if (connection.effectiveType === '3g') {
                        delay = 1500;
                    }
                }
                
                setTimeout(() => {
                    this.initCharts();
                }, delay);
            }
            
            showQualityWarning() {
                // ë°ì´í„° í’ˆì§ˆ ê²½ê³  ë©”ì‹œì§€ í‘œì‹œ (ë¯¸ë˜ ê°œì„ ì— ë¹„í•´ ì£¼ì„ ì²˜ë¦¬)
                console.warn('ë°ì´í„° í’ˆì§ˆ ê²½ê³ : ë¶„ì„ ê²°ê³¼ì˜ ì •í™•ë„ê°€ ë‚®ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                // TODO: UIë¡œ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ í‘œì‹œ
            }

            updateHeroDashboard() {
                // ë¡œë”© ìƒíƒœì¼ ë•ŒëŠ” hero-dashboard ì „ì²´ë¥¼ ì¬êµ¬ì„±
                const heroSection = document.querySelector('.hero-dashboard');
                if (!heroSection) return;
                
                // ì›ë³¸ HTML êµ¬ì¡°ë¡œ ë³µì›
                heroSection.innerHTML = `
                    <div class="relationship-status">
                        <div class="status-badge" id="relationshipStage">${this.data.relationshipStage}</div>
                    </div>
                    
                    <div class="success-meter">
                        <div class="success-circle" id="successCircle">
                            <div class="success-percentage" id="successPercentage">${this.data.successRate}%</div>
                        </div>
                    </div>

                    <h1 class="hero-insight" id="heroInsight">
                        ${this.data.heroInsight}
                    </h1>

                    <div class="confidence-level">
                        <i class="fas fa-shield-check"></i>
                        <span>ë¶„ì„ ì‹ ë¢°ë„: <strong id="confidenceLevel">${this.data.confidenceLevel}%</strong></span>
                    </div>
                `;
                
                // Success rate ì• ë‹ˆë©”ì´ì…˜
                setTimeout(() => {
                    const successCircle = document.getElementById('successCircle');
                    if (successCircle) {
                        successCircle.style.background = 
                            `conic-gradient(from 0deg, #ec4899 0%, #8b5cf6 ${this.data.successRate}%, #f3f4f6 ${this.data.successRate}%)`;
                    }
                }, 500);
            }

            renderSignals() {
                const container = document.getElementById('positiveSignals');
                container.innerHTML = this.data.positiveSignals.map(signal => `
                    <li class="signal-item positive-signal">
                        <div class="signal-icon">
                            <i class="fas fa-check"></i>
                        </div>
                        <div class="signal-content">
                            <div class="signal-text">${signal.text}</div>
                            <div class="signal-description">${signal.description}</div>
                            <div class="confidence-indicator">
                                <span class="confidence-stars">
                                    ${'â˜…'.repeat(signal.confidence)}${'â˜†'.repeat(5 - signal.confidence)}
                                </span>
                                <span style="font-size: 0.8rem; margin-left: 0.5rem;">ì‹ ë¢°ë„</span>
                            </div>
                        </div>
                    </li>
                `).join('');
            }

            renderFavoriteMessage() {
                const container = document.getElementById('favoriteMessage');
                const message = this.data.favoriteMessage;
                
                container.innerHTML = `
                    <div class="message-badge">í˜¸ê°ë„ ${message.confidence}%</div>
                    <div class="message-text">${message.text}</div>
                    <div class="message-meta">
                        <i class="fas fa-clock"></i>
                        <span>${message.date}</span>
                        <span>â€¢</span>
                        <span>${message.reason}</span>
                    </div>
                `;
            }

            renderConversationGuide() {
                const container = document.getElementById('conversationGuide');
                container.innerHTML = this.data.conversationGuide.map(item => `
                    <div class="conversation-item">
                        <div class="conversation-type">${item.type}</div>
                        <div class="conversation-text">${item.text}</div>
                        <div class="conversation-timing">ğŸ’¡ ${item.timing}</div>
                    </div>
                `).join('');
            }

            renderCustomAdvice() {
                const container = document.getElementById('customAdvice');
                container.innerHTML = this.data.customAdvice.map(advice => `
                    <div class="advice-item">
                        <div class="advice-title">
                            <i class="fas fa-lightbulb"></i>
                            ${advice.title}
                        </div>
                        <div class="advice-content">${advice.content}</div>
                    </div>
                `).join('');
            }

            initCharts() {
                // ê´€ì‹¬ë„ ë³€í™” ì¶”ì´ ì°¨íŠ¸
                const interestCtx = document.getElementById('interestChart').getContext('2d');
                new Chart(interestCtx, {
                    type: 'line',
                    data: {
                        labels: this.data.interestTrendData.map(item => item.date),
                        datasets: [{
                            label: 'ê´€ì‹¬ë„ ì§€ìˆ˜',
                            data: this.data.interestTrendData.map(item => item.value),
                            borderColor: '#8b5cf6',
                            backgroundColor: 'rgba(139, 92, 246, 0.1)',
                            fill: true,
                            tension: 0.4,
                            pointBackgroundColor: '#8b5cf6',
                            pointBorderColor: '#fff',
                            pointBorderWidth: 2,
                            pointRadius: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: {
                                min: 0,
                                max: 100,
                                grid: { color: 'rgba(139, 92, 246, 0.1)' },
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            },
                            x: {
                                grid: { color: 'rgba(139, 92, 246, 0.1)' }
                            }
                        }
                    }
                });

                // ê°ì • ë¶„ì„ ì°¨íŠ¸
                const emotionCtx = document.getElementById('emotionChart').getContext('2d');
                new Chart(emotionCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['ê¸ì •ì  ğŸ˜Š', 'ì¤‘ë¦½ì  ğŸ˜', 'ë¶€ì •ì  ğŸ˜”'],
                        datasets: [{
                            data: [
                                this.data.emotionData.positive,
                                this.data.emotionData.neutral,
                                this.data.emotionData.negative
                            ],
                            backgroundColor: ['#10b981', '#6b7280', '#ef4444'],
                            borderWidth: 0,
                            cutout: '60%'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 15,
                                    usePointStyle: true,
                                    font: { size: 12 }
                                }
                            }
                        }
                    }
                });
            }

            startAnimations() {
                // ëª¨ì…˜ ê°ì†Œ ì„¤ì • ê³ ë ¤
                const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
                
                if (prefersReducedMotion) {
                    // ëª¨ì…˜ ê°ì†Œ ì‚¬ìš©ìë¥¼ ìœ„í•œ ì²˜ë¦¬
                    document.querySelectorAll('.result-card, .column-card').forEach(card => {
                        card.style.opacity = '1';
                        card.style.transform = 'none';
                    });
                    return;
                }
                
                // ì¼ë°˜ ì• ë‹ˆë©”ì´ì…˜
                const cards = document.querySelectorAll('.result-card, .column-card');
                cards.forEach((card, index) => {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(20px)';
                    
                    const observer = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                setTimeout(() => {
                                    entry.target.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
                                    entry.target.style.opacity = '1';
                                    entry.target.style.transform = 'translateY(0)';
                                }, index * 100);
                                observer.unobserve(entry.target);
                            }
                        });
                    }, {
                        threshold: 0.1
                    });
                    
                    observer.observe(card);
                });
            }

            setupInteractions() {
                // ìƒì„¸ ì ‘ê·¼ì„± ê³µì§€
                setTimeout(() => {
                    const announcement = `ë¶„ì„ ì™„ë£Œ. ê´€ê³„ ì„±ê³µ í™•ë¥  ${this.data.successRate}í¼ì„¼íŠ¸, ì‹ ë¢°ë„ ${this.data.confidenceLevel}í¼ì„¼íŠ¸ì…ë‹ˆë‹¤. ìì„¸í•œ ë¶„ì„ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.`;
                    const announcements = document.getElementById('announcements');
                    if (announcements) {
                        announcements.textContent = announcement;
                    }
                }, 2000);
                
                // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì„¤ì •
                this.setupKeyboardShortcuts();
                
                // ìŠ¤í¬ë¡¤ ê¸°ë°˜ ì§„ì „ í•­ëª© ì„ íƒ í‘œì‹œ
                this.setupScrollBasedHighlighting();
            }
            
            setupKeyboardShortcuts() {
                document.addEventListener('keydown', (e) => {
                    // Alt + H: í˜„ì¬ ê²°ê³¼ë¡œ ì´ë™
                    if (e.altKey && e.key === 'h') {
                        e.preventDefault();
                        document.querySelector('.hero-dashboard').focus();
                    }
                    
                    // Alt + C: ì°¨íŠ¸ë¡œ ì´ë™
                    if (e.altKey && e.key === 'c') {
                        e.preventDefault();
                        const firstChart = document.querySelector('.chart-container');
                        if (firstChart) firstChart.focus();
                    }
                    
                    // Alt + A: ì¡°ì–¸ë¡œ ì´ë™
                    if (e.altKey && e.key === 'a') {
                        e.preventDefault();
                        const advice = document.getElementById('customAdvice');
                        if (advice) advice.focus();
                    }
                });
            }
            
            setupScrollBasedHighlighting() {
                const cards = document.querySelectorAll('.result-card, .column-card');
                
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('in-view');
                        } else {
                            entry.target.classList.remove('in-view');
                        }
                    });
                }, {
                    threshold: 0.5
                });
                
                cards.forEach(card => observer.observe(card));
            }
        }

        // === í–¥ìƒëœ ì•± ì´ˆê¸°í™” ===
        document.addEventListener('DOMContentLoaded', async () => {
            // ë¡œë”© í‘œì‹œ
            showLoadingState();
            
            try {
                // ë¶„ì„ ë°ì´í„° ì´ˆê¸°í™”
                await initializeAnalysisData();
                
                // ë°ì´í„°ê°€ ì¤€ë¹„ë˜ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ ì´ˆê¸°í™”
                new ResultsFinalController(analysisData);
                
                // ë¡œë”© ìƒíƒœ ì œê±°
                hideLoadingState();
                
            } catch (error) {
                console.error('ì•± ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                
                // ì—ëŸ¬ ë°œìƒ ì‹œ ê¸°ë³¸ ë°ì´í„°ë¡œ ì´ˆê¸°í™”
                analysisData = getDefaultAnalysisData();
                new ResultsFinalController(analysisData);
                
                hideLoadingState();
                
                if (window.showNotification) {
                    window.showNotification('ë°ì´í„° ë¡œë”©ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë°ëª¨ ë°ì´í„°ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.', 'warning');
                }
            }
        });
        
        // í–¥ìƒëœ ë¡œë”© ìƒíƒœ ì²˜ë¦¬
        function showLoadingState() {
            const heroSection = document.querySelector('.hero-dashboard');
            if (heroSection) {
                heroSection.innerHTML = `
                    <div style="text-align: center; padding: 2rem;" role="status" aria-live="polite">
                        <div class="loading-animation" style="margin: 0 auto 1rem; width: 60px; height: 60px;">
                            <i class="fas fa-heart" style="font-size: 2rem; color: #ec4899; animation: pulse 1.5s ease-in-out infinite;"></i>
                        </div>
                        <h2 style="color: var(--text-primary); margin-bottom: 0.5rem;">ë¶„ì„ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</h2>
                        <p style="color: var(--text-secondary);">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”. AIê°€ ëŒ€í™”ë¥¼ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
                        <div class="progress-indicator" style="width: 100%; height: 4px; background: #f3f4f6; border-radius: 2px; margin-top: 1rem; overflow: hidden;">
                            <div class="progress-bar" style="width: 0%; height: 100%; background: var(--primary-gradient); animation: progress 3s ease-in-out infinite;"></div>
                        </div>
                    </div>
                `;
                
                // CSS ì• ë‹ˆë©”ì´ì…˜ ë™ì  ì¶”ê°€
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes pulse {
                        0%, 100% { transform: scale(1); opacity: 1; }
                        50% { transform: scale(1.1); opacity: 0.7; }
                    }
                    @keyframes progress {
                        0% { width: 0%; }
                        50% { width: 70%; }
                        100% { width: 100%; }
                    }
                `;
                document.head.appendChild(style);
            }
        }
        
        // ë¡œë”© ìƒíƒœ ì œê±°
        function hideLoadingState() {
            // ë¡œë”© ë©”ì‹œì§€ëŠ” ResultsFinalControllerì—ì„œ ì‹¤ì œ ë°ì´í„°ë¡œ êµì²´ë¨
        }
    </script>
    
    <!-- ì ‘ê·¼ì„± ê°œì„ : Skip Link -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- JSON-LD êµ¬ì¡°í™” ë°ì´í„° -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Date Genie - AI ê´€ê³„ ë¶„ì„",
        "description": "AI ê¸°ë°˜ ëŒ€í™” ë¶„ì„ì„ í†µí•œ ì •í™•í•œ ê´€ê³„ ì§„ë‹¨ ë° ë§ì¶¤í™”ëœ ì „ëµ ì œê³µ",
        "applicationCategory": "RelationshipAnalysisApplication",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "KRW"
        }
    }
    </script>
</body>
</html>